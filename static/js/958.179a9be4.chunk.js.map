{"version":3,"file":"static/js/958.179a9be4.chunk.js","mappings":"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","sources":["webpack://ju/./src/componantStyle/AddChoice.module.css?c816","pages/Dashboard/AddChoice.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"TextQuestions\":\"AddChoice_TextQuestions__RIg-y\",\"headForm\":\"AddChoice_headForm__bCUZt\",\"submitQuestions\":\"AddChoice_submitQuestions__7Eg3r\"};","import React, { useState } from \"react\";\r\nimport style from \"../../componantStyle/AddChoice.module.css\";\r\nimport { useUser } from \"../../context/Context\";\r\nimport Joi from \"joi\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function AddChoice() {\r\n  const { direction,noquestion} = useUser();\r\n  const [choice, setChoice] = useState({\r\n    body: \"body\",\r\n    question:noquestion\r\n  });\r\n  const [errorListDashboard, setErrorListDashboard] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorDashboard, setErrorDashboard] = useState(null);\r\n  const [ addSuccess, setAddSuccess ] = useState( null );\r\n  const navigate = useNavigate();\r\n  function handleChange(e) {\r\n    setChoice((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  }\r\n  function validationChoiceAddDashboard() {\r\n    let schema = Joi.object({\r\n   \r\n      body: Joi.string().required(),\r\n      body_en: Joi.string().required(),\r\n      body_ar: Joi.string().required(),\r\n     \r\n      question:Joi.number().required()\r\n    });\r\n    return schema.validate(choice, { abortEarly: false });\r\n  }\r\n  ////////////function submit/////////////\r\n  async function handlesubmit(e) {\r\n    e.preventDefault();\r\n    let responseValidateChoiceAdd = validationChoiceAddDashboard();\r\n    if (responseValidateChoiceAdd.error) {\r\n      setErrorListDashboard([responseValidateChoiceAdd.error.details]);\r\n    } else {\r\n      setErrorListDashboard(null);\r\n      try {\r\n         setAddSuccess( false );\r\n        setLoading(true);\r\n        const response = await fetch(\r\n          \"https://kog.pythonanywhere.com/api/v1/home/choices/\",\r\n          {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              Authorization: `Bearer ${localStorage.getItem(\"token_access\")}`,\r\n            },\r\n            body: JSON.stringify(choice),\r\n          }\r\n        );\r\n        const result = await response.json();\r\n        setLoading(false);\r\n        if (result.created_at) {\r\n           setAddSuccess(true)\r\n        //   navigate(\"/dashboard/jops/displayquestionform\");\r\n        } else {\r\n          setErrorDashboard(result);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <form className={style.TextQuestions}>\r\n      {errorListDashboard &&\r\n        errorListDashboard.map((error, index) => (\r\n          <p key={index} className=\"alert alert-warning\">\r\n            {error[index].message}\r\n          </p>\r\n        ))}\r\n      {addSuccess && (\r\n        <p className=\"alert alert-success\">\r\n          {direction === \"EN\" ? \"Success Added\" : \"تم الاضافة بنجاح\"}\r\n        </p>\r\n      )}\r\n      <div className={style.headForm}>\r\n        <button className=\"btn btn-secondary\" onClick={handlesubmit}>\r\n          {loading ? (\r\n            <div className=\"spinner-border text-secondary\" role=\"status\">\r\n              <span className=\"sr-only\"></span>\r\n            </div>\r\n          ) : (\r\n            <>{direction === \"EN\" ? \"Add choice\" : \"أضافة اختيار\"} </>\r\n          )}\r\n        </button>\r\n        <button\r\n          className=\"btn btn-secondary\"\r\n                  onClick={ ( e ) => {\r\n              e.preventDefault()\r\n            navigate(\"/dashboard/jops/displayquestionform\");\r\n          }}\r\n        >\r\n          {direction === \"EN\" ? \"Back\" : \"رجوع\"}\r\n        </button>\r\n      </div>\r\n      {/* <label htmlFor=\"form\">\r\n        {direction === \"EN\" ? \"Enter number form\" : \"ادخل رقم الفورم\"}\r\n      </label>\r\n      <br />\r\n      <input type=\"number\" name=\"form\" id=\"form\" onChange={handleChange} /> */}\r\n      {errorDashboard?.question && (\r\n        <p className=\"error\">{errorDashboard?.question}</p>\r\n      )}\r\n      <label htmlFor=\"body_ar\">\r\n        {\" \"}\r\n        {direction === \"EN\"\r\n          ? \"Enter choice Arabic\"\r\n          : \"اكتب الاجابة باللغة العربية\"}{\" \"}\r\n      </label>\r\n      <input type=\"text\" name=\"body_ar\" id=\"body_ar\" onChange={handleChange} />\r\n      <label htmlFor=\"body_en\">\r\n        {\" \"}\r\n        {direction === \"EN\"\r\n          ? \"Enter choice English\"\r\n          : \"اكتب الاجابة باللغة الانجليزية\"}{\" \"}\r\n      </label>\r\n      <input type=\"text\" name=\"body_en\" id=\"body_en\" onChange={handleChange} />\r\n    </form>\r\n  );\r\n}\r\n"],"names":["AddChoice","direction","noquestion","useUser","choice","setChoice","useState","body","question","errorListDashboard","setErrorListDashboard","loading","setLoading","errorDashboard","setErrorDashboard","addSuccess","setAddSuccess","navigate","useNavigate","handleChange","e","prev","target","name","value","_jsxs","className","style","TextQuestions","children","map","error","index","_jsx","message","headForm","onClick","async","preventDefault","responseValidateChoiceAdd","Joi","required","body_en","body_ar","validate","abortEarly","details","response","fetch","method","headers","Authorization","concat","localStorage","getItem","JSON","stringify","result","json","created_at","console","role","_Fragment","htmlFor","type","id","onChange"],"sourceRoot":""}