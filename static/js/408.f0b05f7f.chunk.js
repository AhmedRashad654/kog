"use strict";(self.webpackChunkju=self.webpackChunkju||[]).push([[408],{408:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var a=t(5043);const n={collAddUser:"AddContact_collAddUser__oLf3N",form:"AddContact_form__vTV5K",headAddUser:"AddContact_headAddUser__69kU+",inp:"AddContact_inp__OybXZ"};var r=t(1694),l=t.n(r),o=t(3216),d=t(579);function c(){const[e,s]=(0,a.useState)(),[t,r]=(0,a.useState)(null),[c,i]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),b=(0,o.Zp)();function j(e){s((s=>({...s,[e.target.name]:e.target.value})))}return console.log(c),(0,d.jsx)("div",{className:n.collAddUser,children:(0,d.jsxs)("form",{className:n.form,children:[t&&t.map(((e,s)=>(0,d.jsx)("p",{className:"alert alert-warning",children:e[s].message},s))),(0,d.jsxs)("div",{className:n.headAddUser,children:[(0,d.jsx)("button",{className:"btn btn-secondary",onClick:async function(s){s.preventDefault();let t=l().object({subject:l().string().required(),body:l().string().required()}).validate(e,{abortEarly:!1});if(t.error)r([t.error.details]);else{r(null),i(null);try{h(!0);const s=await fetch("https://kog.pythonanywhere.com/api/v1/home/contacts/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token_access"))},body:JSON.stringify(e)}),t=await s.json();h(!1),t.created_at?b("/dashboard/contact"):i(t)}catch(a){console.error(a)}}},children:u?(0,d.jsx)("div",{className:"spinner-border text-secondary",role:"status",children:(0,d.jsx)("span",{className:"sr-only"})}):"\u0627\u0636\u0627\u0641\u0629"}),(0,d.jsx)("button",{className:"btn btn-success",onClick:()=>{b("/dashboard/contact")},children:"\u0631\u062c\u0648\u0639"})]}),(0,d.jsxs)("div",{className:n.colladduser,children:[(0,d.jsxs)("div",{className:n.inp,children:[(0,d.jsx)("label",{htmlFor:"subject",children:" \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062a\u0648\u0627\u0635\u0644"}),(0,d.jsx)("br",{}),(0,d.jsx)("input",{type:"text",name:"subject",id:"subject",onChange:j}),(null===c||void 0===c?void 0:c.subject)&&(0,d.jsx)("p",{className:"error",children:null===c||void 0===c?void 0:c.subject})]}),(0,d.jsxs)("div",{className:n.inp,children:[(0,d.jsx)("label",{htmlFor:"body",children:"\u0627\u0644\u0642\u064a\u0645\u0629"}),(0,d.jsx)("br",{}),(0,d.jsx)("input",{type:"text",id:"body",name:"body",onChange:j}),(null===c||void 0===c?void 0:c.body)&&(0,d.jsx)("p",{className:"error",children:null===c||void 0===c?void 0:c.body})]})]})]})})}}}]);
//# sourceMappingURL=408.f0b05f7f.chunk.js.map