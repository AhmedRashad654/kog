{"version":3,"file":"static/js/408.f0b05f7f.chunk.js","mappings":"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","sources":["webpack://ju/./src/componantStyle/AddContact.module.css?2af7","pages/Dashboard/AddContact.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"collAddUser\":\"AddContact_collAddUser__oLf3N\",\"form\":\"AddContact_form__vTV5K\",\"headAddUser\":\"AddContact_headAddUser__69kU+\",\"inp\":\"AddContact_inp__OybXZ\"};","import React, { useState } from 'react'\r\nimport style from '../../componantStyle/AddContact.module.css'\r\nimport Joi from 'joi';\r\nimport { useNavigate } from 'react-router-dom';\r\nexport default function AddContact() {\r\n    const [ addContact, setAddContact ] = useState();\r\n    const [ errorListDashboard, setErrorListDashboard ] = useState( null );\r\n    const [ errorBack, setErrorBack ] = useState( null );\r\n    const [ loading, setLoading ] = useState( false );\r\n    const navigate = useNavigate();\r\n    /////////////function handle change////////////\r\n      function handleChange(e) {\r\n        setAddContact((prev) => ({\r\n          ...prev,\r\n          [e.target.name]: e.target.value,\r\n        }));\r\n    }\r\n    ////////////validation Joi////////////////\r\n      function validationContactDashboard() {\r\n        let schema = Joi.object({\r\n          subject: Joi.string().required(),\r\n          body: Joi.string().required(),\r\n        });\r\n        return schema.validate(addContact, { abortEarly: false });\r\n    }\r\n    /////////function Add Contact//////////////////\r\n      async function handlesubmit(e) {\r\n        e.preventDefault();\r\n        let responseValidateContact = validationContactDashboard();\r\n        if (responseValidateContact.error) {\r\n          setErrorListDashboard([responseValidateContact.error.details]);\r\n        } else {\r\n            setErrorListDashboard( null );\r\n            setErrorBack(null)\r\n          try {\r\n            setLoading(true);\r\n            const response = await fetch(\r\n              \"https://kog.pythonanywhere.com/api/v1/home/contacts/\",\r\n              {\r\n                method: \"POST\",\r\n                headers: {\r\n                  \"Content-Type\": \"application/json\",\r\n                  Authorization: `Bearer ${localStorage.getItem(\r\n                    \"token_access\"\r\n                  )}`,\r\n                },\r\n                body: JSON.stringify(addContact),\r\n              }\r\n            );\r\n            const result = await response.json();\r\n            setLoading(false);\r\n            if (result.created_at) {\r\n              navigate(\"/dashboard/contact\");\r\n            } else {\r\n              setErrorBack(result);\r\n            }\r\n          } catch (error) {\r\n            console.error(error);\r\n          }\r\n        }\r\n    }\r\n    console.log(errorBack);\r\n  return (\r\n    <div className={style.collAddUser}>\r\n      <form className={style.form}>\r\n        {errorListDashboard &&\r\n          errorListDashboard.map((error, index) => (\r\n            <p key={index} className=\"alert alert-warning\">\r\n              {error[index].message}\r\n            </p>\r\n          ))}\r\n\r\n        <div className={style.headAddUser}>\r\n          <button className=\"btn btn-secondary\" onClick={handlesubmit}>\r\n            {loading ? (\r\n              <div className=\"spinner-border text-secondary\" role=\"status\">\r\n                <span className=\"sr-only\"></span>\r\n              </div>\r\n            ) : (\r\n              \"اضافة\"\r\n            )}\r\n          </button>\r\n          <button\r\n            className=\"btn btn-success\"\r\n            onClick={() => {\r\n              navigate(\"/dashboard/contact\");\r\n            }}\r\n          >\r\n            رجوع\r\n          </button>\r\n        </div>\r\n        <div className={style.colladduser}>\r\n          <div className={style.inp}>\r\n            <label htmlFor=\"subject\"> طريقة التواصل</label>\r\n            <br />\r\n            <input\r\n              type=\"text\"\r\n              name=\"subject\"\r\n              id=\"subject\"\r\n              onChange={handleChange}\r\n            />\r\n            {errorBack?.subject && (\r\n              <p className=\"error\">{errorBack?.subject}</p>\r\n            )}\r\n          </div>\r\n          <div className={style.inp}>\r\n            <label htmlFor=\"body\">القيمة</label>\r\n            <br />\r\n            <input type=\"text\" id=\"body\" name=\"body\" onChange={handleChange} />\r\n            {errorBack?.body && <p className=\"error\">{errorBack?.body}</p>}\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["AddContact","addContact","setAddContact","useState","errorListDashboard","setErrorListDashboard","errorBack","setErrorBack","loading","setLoading","navigate","useNavigate","handleChange","e","prev","target","name","value","console","log","_jsx","className","style","collAddUser","children","_jsxs","form","map","error","index","message","headAddUser","onClick","async","preventDefault","responseValidateContact","Joi","subject","required","body","validate","abortEarly","details","response","fetch","method","headers","Authorization","concat","localStorage","getItem","JSON","stringify","result","json","created_at","role","colladduser","inp","htmlFor","type","id","onChange"],"sourceRoot":""}