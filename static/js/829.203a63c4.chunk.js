"use strict";(self.webpackChunkju=self.webpackChunkju||[]).push([[829],{9829:(s,e,a)=>{a.r(e),a.d(e,{default:()=>o});var l=a(5043),n=a(1694),r=a.n(n),t=a(579);function o(){const[s,e]=(0,l.useState)(!1),[a,n]=(0,l.useState)({}),[o,d]=(0,l.useState)(null),[i,c]=(0,l.useState)(null),[u,p]=(0,l.useState)(null),[h,w]=(0,l.useState)(null);function m(s){n((e=>({...e,[s.target.name]:s.target.value})))}return(0,t.jsxs)("form",{className:"formLogin",onSubmit:async function(s){s.preventDefault(),p(null);let l=r().object({old_password:r().string().required(),new_password:r().string().required()}).validate(a,{abortEarly:!0});if(l.error)p(l.error.details[0].message);else{const s=localStorage.getItem("token_access");if(localStorage.getItem("token_refresh")){e(!0),c(null),d(null);const l=await fetch("https://kog.pythonanywhere.com/api/v1/accounts/change-password/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(a)});let n=await l.json();e(!1),console.log(n),"success"===n.status?d(n.message):c(n)}else w("you not login")}},children:[h&&(0,t.jsx)("p",{className:"alert alert-danger",children:h}),u&&(0,t.jsx)("p",{className:"alert alert-danger",children:u}),o&&(0,t.jsx)("p",{className:"alert bg-success",children:o}),(null===i||void 0===i?void 0:i.new_password)&&(0,t.jsx)("p",{className:"alert alert-danger",children:null===i||void 0===i?void 0:i.new_password[0]}),(null===i||void 0===i?void 0:i.old_password)&&(0,t.jsx)("p",{className:"alert alert-danger",children:null===i||void 0===i?void 0:i.old_password}),(0,t.jsxs)("div",{className:"inp",children:[(0,t.jsx)("label",{htmlFor:"old_password",children:"old-password"}),(0,t.jsx)("br",{}),(0,t.jsx)("input",{type:"password",name:"old_password",id:"old_password",onChange:m})]}),(0,t.jsxs)("div",{className:"inp",children:[(0,t.jsx)("label",{htmlFor:"password",children:"New-password"}),(0,t.jsx)("br",{}),(0,t.jsx)("input",{type:"password",name:"new_password",id:"new_password",onChange:m})]}),(0,t.jsx)("div",{className:"inp",children:(0,t.jsx)("button",{className:"btn btn-secondary",children:s?(0,t.jsx)("div",{className:"spinner-border text-secondary",role:"status",children:(0,t.jsx)("span",{className:"sr-only"})}):"changePassword"})})]})}}}]);
//# sourceMappingURL=829.203a63c4.chunk.js.map