{"version":3,"file":"static/js/829.203a63c4.chunk.js","mappings":"+JAEe,SAASA,IACtB,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAAQC,IAAaF,EAAAA,EAAAA,UAAS,CAAC,IAC/BG,EAAeC,IAAoBJ,EAAAA,EAAAA,UAAS,OAC5CK,EAAWC,IAAgBN,EAAAA,EAAAA,UAAS,OACjCO,EAAiBC,IAAuBR,EAAAA,EAAAA,UAAU,OAClDS,EAASC,IAAeV,EAAAA,EAAAA,UAAU,MAC5C,SAASW,EAAaC,GACpBV,GAAWW,IAAS,IACfA,EACH,CAACD,EAAEE,OAAOC,MAAOH,EAAEE,OAAOE,SAE9B,CAqDA,OACEC,EAAAA,EAAAA,MAAA,QAAMC,UAAU,YAAYC,SA1C9BC,eAA8BR,GAC1BA,EAAES,iBACIb,EAAmB,MAE3B,IAAIc,EAbSC,IAAAA,OAAW,CACtBC,aAAcD,IAAAA,SAAaE,WAE3BC,aAAcH,IAAAA,SAAaE,aAEfE,SAAS1B,EAAQ,CAAE2B,YAAY,IAS7C,GAAIN,EAA+BO,MACjCrB,EAAmBc,EAA+BO,MAAMC,QAAQ,GAAGC,aAC9D,CACL,MAAMC,EAAmBC,aAAaC,QAAQ,gBAE5C,GADwBD,aAAaC,QAAQ,iBACE,CAC3CnC,GAAY,GACZO,EAAc,MACdF,EAAiB,MACjB,MAAM+B,QAAiBC,MACrB,kEACA,CACEC,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAChBC,cAAc,UAADC,OAAYR,IAE3BS,KAAMC,KAAKC,UAAU1C,KAGzB,IAAI2C,QAAeT,EAASU,OAC5B9C,GAAW,GACX+C,QAAQC,IAAIH,GACU,YAAlBA,EAAOI,OACT5C,EAAiBwC,EAAOb,SAExBzB,EAAasC,EAErB,MACElC,EAAW,gBAIf,CACF,EAGuDuC,SAAA,CAClDxC,IAAWyC,EAAAA,EAAAA,KAAA,KAAGhC,UAAU,qBAAoB+B,SAAExC,IAC9CF,IACC2C,EAAAA,EAAAA,KAAA,KAAGhC,UAAU,qBAAoB+B,SAAE1C,IAEpCJ,IAAiB+C,EAAAA,EAAAA,KAAA,KAAGhC,UAAU,mBAAkB+B,SAAE9C,KACzC,OAATE,QAAS,IAATA,OAAS,EAATA,EAAWqB,gBACVwB,EAAAA,EAAAA,KAAA,KAAGhC,UAAU,qBAAoB+B,SAAW,OAAT5C,QAAS,IAATA,OAAS,EAATA,EAAWqB,aAAa,MAGnD,OAATrB,QAAS,IAATA,OAAS,EAATA,EAAWmB,gBACV0B,EAAAA,EAAAA,KAAA,KAAGhC,UAAU,qBAAoB+B,SAAW,OAAT5C,QAAS,IAATA,OAAS,EAATA,EAAWmB,gBAGhDP,EAAAA,EAAAA,MAAA,OAAKC,UAAU,MAAK+B,SAAA,EAClBC,EAAAA,EAAAA,KAAA,SAAOC,QAAQ,eAAcF,SAAC,kBAC9BC,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAA,SACEE,KAAK,WACLrC,KAAK,eACLsC,GAAG,eACHC,SAAU3C,QAGdM,EAAAA,EAAAA,MAAA,OAAKC,UAAU,MAAK+B,SAAA,EAClBC,EAAAA,EAAAA,KAAA,SAAOC,QAAQ,WAAUF,SAAC,kBAC1BC,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAA,SACEE,KAAK,WACLrC,KAAK,eACLsC,GAAG,eACHC,SAAU3C,QAGduC,EAAAA,EAAAA,KAAA,OAAKhC,UAAU,MAAK+B,UAClBC,EAAAA,EAAAA,KAAA,UAAQhC,UAAU,oBAAmB+B,SAClCnD,GACCoD,EAAAA,EAAAA,KAAA,OAAKhC,UAAU,gCAAgCqC,KAAK,SAAQN,UAC1DC,EAAAA,EAAAA,KAAA,QAAMhC,UAAU,cAGlB,uBAMZ,C","sources":["componant/ChangePassword.jsx"],"sourcesContent":["import React, {  useState } from \"react\";\r\nimport Joi from \"joi\";\r\nexport default function ChangePassword() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [change, setChange] = useState({});\r\n  const [successChange, setSuccessChange] = useState(null);\r\n  const [errorBack, setErrorBack] = useState(null);\r\n    const [ errorListChange, setErrorListChange ] = useState( null );\r\n    const [ noLogin, setNoLogin ] = useState( null );\r\n  function handleChange(e) {\r\n    setChange((prevState) => ({\r\n      ...prevState,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  }\r\n  /////////////function validation change password///////////////////\r\n  function validateChangePassword() {\r\n    let Schema = Joi.object({\r\n      old_password: Joi.string().required(),\r\n\r\n      new_password: Joi.string().required(),\r\n    });\r\n    return Schema.validate(change, { abortEarly: true });\r\n  }\r\n    /////////////function submit change password///////////////////\r\n   \r\n  async function changePassword(e) {\r\n      e.preventDefault();\r\n            setErrorListChange(null);\r\n      \r\n    let responseValidateChangePassword = validateChangePassword();\r\n    if (responseValidateChangePassword.error) {\r\n      setErrorListChange(responseValidateChangePassword.error.details[0].message);\r\n    } else {\r\n      const storeTokenAccess = localStorage.getItem(\"token_access\");\r\n      const storeTokenRefresh = localStorage.getItem(\"token_refresh\");\r\n        if ( ( storeTokenAccess, storeTokenRefresh ) ) {\r\n            setLoading( true );\r\n            setErrorBack( null );\r\n            setSuccessChange(null)\r\n            const response = await fetch(\r\n              \"https://kog.pythonanywhere.com/api/v1/accounts/change-password/\",\r\n              {\r\n                method: \"PUT\",\r\n                headers: {\r\n                  \"Content-Type\": \"application/json\",\r\n                  Authorization: `Bearer ${storeTokenAccess}`,\r\n                },\r\n                body: JSON.stringify(change),\r\n              }\r\n            );\r\n            let result = await response.json();\r\n            setLoading(false)\r\n            console.log(result);\r\n            if (result.status === \"success\") {\r\n              setSuccessChange(result.message);\r\n            } else {\r\n              setErrorBack(result);\r\n            }\r\n      } else {\r\n        setNoLogin('you not login')\r\n      }\r\n  \r\n        \r\n    }\r\n  }\r\n\r\n  return (\r\n    <form className=\"formLogin\" onSubmit={changePassword}>\r\n      {noLogin && <p className=\"alert alert-danger\">{noLogin}</p>}\r\n      {errorListChange && (\r\n        <p className=\"alert alert-danger\">{errorListChange}</p>\r\n      )}\r\n      {successChange && <p className=\"alert bg-success\">{successChange}</p>}\r\n      {errorBack?.new_password && (\r\n        <p className=\"alert alert-danger\">{errorBack?.new_password[0]}</p>\r\n      )}\r\n\r\n      {errorBack?.old_password && (\r\n        <p className=\"alert alert-danger\">{errorBack?.old_password}</p>\r\n      )}\r\n\r\n      <div className=\"inp\">\r\n        <label htmlFor=\"old_password\">old-password</label>\r\n        <br />\r\n        <input\r\n          type=\"password\"\r\n          name=\"old_password\"\r\n          id=\"old_password\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className=\"inp\">\r\n        <label htmlFor=\"password\">New-password</label>\r\n        <br />\r\n        <input\r\n          type=\"password\"\r\n          name=\"new_password\"\r\n          id=\"new_password\"\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n      <div className=\"inp\">\r\n        <button className=\"btn btn-secondary\">\r\n          {loading ? (\r\n            <div className=\"spinner-border text-secondary\" role=\"status\">\r\n              <span className=\"sr-only\"></span>\r\n            </div>\r\n          ) : (\r\n            \"changePassword\"\r\n          )}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n"],"names":["ChangePassword","loading","setLoading","useState","change","setChange","successChange","setSuccessChange","errorBack","setErrorBack","errorListChange","setErrorListChange","noLogin","setNoLogin","handleChange","e","prevState","target","name","value","_jsxs","className","onSubmit","async","preventDefault","responseValidateChangePassword","Joi","old_password","required","new_password","validate","abortEarly","error","details","message","storeTokenAccess","localStorage","getItem","response","fetch","method","headers","Authorization","concat","body","JSON","stringify","result","json","console","log","status","children","_jsx","htmlFor","type","id","onChange","role"],"sourceRoot":""}